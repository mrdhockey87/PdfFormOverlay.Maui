<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PdfFormOverlay.Maui.PasswordRecoveryPage"
             Title="Password Recovery">

    <ScrollView>
        <StackLayout Padding="20" Spacing="20">

            <!-- Header -->
            <StackLayout>
                <Image Source="key_icon.png"
                       WidthRequest="64"
                       HeightRequest="64"
                       HorizontalOptions="Center" />
                <Label Text="Password Recovery"
                       FontSize="24"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Margin="0,10,0,0" />
                <Label Text="Answer your security questions to recover access"
                       FontSize="14"
                       TextColor="Gray"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />
            </StackLayout>

            <!-- Loading Indicator -->
            <ActivityIndicator x:Name="loadingIndicator"
                               IsVisible="False"
                               IsRunning="False"
                               Color="Blue"
                               VerticalOptions="Center" />

            <!-- Security Questions -->
            <StackLayout x:Name="questionsPanel" Spacing="15">

                <!-- Question 1 -->
                <Border BackgroundColor="LightBlue"
                        Padding="15"
                        StrokeThickness="1"
                        Stroke="LightGray">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="8" />
                    </Border.StrokeShape>
                    <StackLayout Spacing="10">
                        <Label x:Name="question1Label"
                               Text="Question 1 will appear here"
                               FontSize="14"
                               FontAttributes="Bold" />
                        <Entry x:Name="answer1Entry"
                               Placeholder="Your answer"
                               BackgroundColor="White" />
                    </StackLayout>
                </Border>

                <!-- Question 2 -->
                <Border BackgroundColor="LightGreen"
                        Padding="15"
                        StrokeThickness="1"
                        Stroke="LightGray">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="8" />
                    </Border.StrokeShape>
                    <StackLayout Spacing="10">
                        <Label x:Name="question2Label"
                               Text="Question 2 will appear here"
                               FontSize="14"
                               FontAttributes="Bold" />
                        <Entry x:Name="answer2Entry"
                               Placeholder="Your answer"
                               BackgroundColor="White" />
                    </StackLayout>
                </Border>

                <!-- Question 3 -->
                <Border BackgroundColor="LightCoral"
                        Padding="15"
                        StrokeThickness="1"
                        Stroke="LightGray">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="8" />
                    </Border.StrokeShape>
                    <StackLayout Spacing="10">
                        <Label x:Name="question3Label"
                               Text="Question 3 will appear here"
                               FontSize="14"
                               FontAttributes="Bold" />
                        <Entry x:Name="answer3Entry"
                               Placeholder="Your answer"
                               BackgroundColor="White" />
                    </StackLayout>
                </Border>
            </StackLayout>

            <!-- Instructions -->
            <Border BackgroundColor="LightYellow"
                    Padding="15"
                    StrokeThickness="1"
                    Stroke="LightGray">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="8" />
                </Border.StrokeShape>
                <StackLayout>
                    <Label Text="💡 Tips"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="Orange" />
                    <Label Text="• Answers are case-insensitive"
                           FontSize="12"
                           TextColor="DarkOrange" />
                    <Label Text="• Extra spaces will be ignored"
                           FontSize="12"
                           TextColor="DarkOrange" />
                    <Label Text="• All three answers must be correct"
                           FontSize="12"
                           TextColor="DarkOrange" />
                </StackLayout>
            </Border>

            <!-- Result Panel -->
            <StackLayout x:Name="resultPanel"
                         IsVisible="False"
                         Spacing="10">
                <Border x:Name="resultFrame"
                        Padding="15"
                        StrokeThickness="1"
                        Stroke="LightGray">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="8" />
                    </Border.StrokeShape>
                    <StackLayout>
                        <Label x:Name="resultLabel"
                               FontSize="16"
                               FontAttributes="Bold"
                               HorizontalOptions="Center" />
                        <Entry x:Name="recoveredPasswordEntry"
                               IsVisible="False"
                               IsReadOnly="True"
                               BackgroundColor="LightGray" />
                        <Button x:Name="copyPasswordButton"
                                Text="Copy Password"
                                IsVisible="False"
                                Clicked="OnCopyPasswordClicked"
                                BackgroundColor="Blue"
                                TextColor="White"
                                CornerRadius="5" />
                    </StackLayout>
                </Border>
            </StackLayout>

            <!-- Buttons -->
            <StackLayout Orientation="Horizontal"
                         HorizontalOptions="Center"
                         Spacing="15">
                <Button x:Name="recoverButton"
                        Text="Recover Password"
                        Clicked="OnRecoverPasswordClicked"
                        BackgroundColor="Green"
                        TextColor="White"
                        WidthRequest="150"
                        CornerRadius="8" />

                <Button Text="Cancel"
                        Clicked="OnCancelClicked"
                        BackgroundColor="Gray"
                        TextColor="White"
                        WidthRequest="100"
                        CornerRadius="8" />
            </StackLayout>

            <!-- Additional Options -->
            <StackLayout Spacing="10" Margin="0,20,0,0">
                <Label Text="Still having trouble?"
                       FontSize="12"
                       TextColor="Gray"
                       HorizontalOptions="Center" />
                <Button Text="Reset All Security Settings"
                        Clicked="OnResetSecurityClicked"
                        BackgroundColor="Red"
                        TextColor="White"
                        CornerRadius="5"
                        FontSize="12"
                        WidthRequest="200" />
                <Label Text="⚠️ This will delete all saved form data"
                       FontSize="10"
                       TextColor="Red"
                       HorizontalOptions="Center" />
            </StackLayout>
        </StackLayout>
    </ScrollView>
</ContentPage>